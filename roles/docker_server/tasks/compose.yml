- name: Get latest version of compose
  shell: curl -s "https://api.github.com/repos/docker/compose/releases/latest" | grep '"tag_name":' | cut -d '"' -f4
  register: compose_latest_version

- name: debug compose latest version
  debug:
    msg: "latest compose: {{ compose_latest_version.stdout }}"

- name: Install compose
  command: 'curl -sSL https://github.com/docker/compose/releases/download/{{ compose_latest_version.stdout }}/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose'  
  become: true

- name: Set perms on docker-compose binary
  file:
    path: '/usr/local/bin/docker-compose'
    owner: 'root'
    group: 'root'
    mode: 755
  become: true
  